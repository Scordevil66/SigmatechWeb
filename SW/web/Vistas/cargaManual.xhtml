<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:composition template="./template.xhtml">

        <ui:define name="content">

            <!-- page content -->
            <div class="right_col" role="main">
                <!-- top tiles -->
                <h:form id="formularioRegistro" class="form-horizontal form-label-left" enctype="multipart/form-data">
                    <div class="col-md-12 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h2>Carga Manual de Inventarios <small>Registro de inventarios</small></h2>

                                <div class="clearfix"></div>
                            </div>


                        </div>
                    </div>

                    <div class="col-md-6 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h2>Datos básicos</h2>

                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <br />


                                <div class="form-group">
                                    <label  for="inputEquipo" class="control-label col-md-3 col-sm-3 col-xs-12">Equipo:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <p:inputText required="true" requiredMessage="Ingrese nombre del equipo" class="form-control" id="inputEquipo" placeholder="Nombre del equipo" value="#{inventarioCT.inventario.equipo}"/>
                                        <p:message for="inputEquipo"/>                                         
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputNInv" class="control-label col-md-3 col-sm-3 col-xs-12">N° Inventario:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <p:inputText required="true" requiredMessage="Ingrese número de inventario" class="form-control" id="inputNInv" placeholder="Ingrese número de inventario" value="#{inventarioCT.inventario.nroInventario}"/>    

                                        <p:message for="inputNInv"/> 
                                    </div>
                                </div>
                                <div class="form-group">


                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Marca:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">

                                        <h:selectOneMenu class="form-control" required="true" requiredMessage="Seleccione una marca" id="SMarca"  value="#{inventarioCT.marca.idMarca}"   >

                                            <f:selectItem itemLabel="Seleccione Marca" noSelectionOption="true" />
                                            <f:selectItems  value="#{marcaCT.marcas}" var="marca" itemLabel="#{marca.marca}" itemValue="#{marca.idMarca}"/>

                                            <f:ajax execute = "SMarca" render = "SMModelo" listener="#{inventarioCT.consultarModelos(inventarioCT.marca.idMarca)}" /> 
                                        </h:selectOneMenu>

                                        <p:message for="SMarca"/>
                                    </div>
                                </div>

                                <div class="form-group" >
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Modelo:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12" >
                                        <h:selectOneMenu class="form-control" required="true" requiredMessage="Seleccione una modelo" id="SMModelo" value="#{inventarioCT.modelo.idModelo}" >
                                            <f:selectItem itemLabel="Seleccione Modelos" noSelectionOption="true"/>
                                            <f:selectItems value="#{inventarioCT.modelos}" var="modelo" itemLabel="#{modelo.nombreModelo}" itemValue="#{modelo.idModelo}"/>
                                            <f:ajax execute = "SMModelo" render = "SMSerie" listener="#{inventarioCT.consultarSeries(inventarioCT.modelo.idModelo)}" /> 
                                        </h:selectOneMenu>
                                        <p:message for="SMModelo"/>
                                    </div>
                                </div>

                                <div class="form-group" >
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Serie:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12" >
                                        <h:selectOneMenu class="form-control" required="true" requiredMessage="Seleccione una serie" id="SMSerie" value="#{inventarioCT.serie.idSerie}" >
                                            <f:selectItem itemLabel="Seleccione Series" noSelectionOption="true"/>
                                            <f:selectItems value="#{inventarioCT.series}" var="serie" itemLabel="#{serie.numeroSerie}" itemValue="#{serie.idSerie}"/>
                                        </h:selectOneMenu>
                                        <p:message for="SMSerie"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Servicio:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <h:selectOneMenu class="form-control" required="true" requiredMessage="Seleccione un servicio" id="SServicio" value="#{inventarioCT.servicio.idServicio}">
                                            <f:selectItem itemLabel="Seleccione Servicio" noSelectionOption="true"/>
                                            <f:selectItems value="#{inventarioCT.servicios}" var="servicios" itemLabel="#{servicios.servicio}" itemValue="#{servicios.idServicio}"/>
                                        </h:selectOneMenu>
                                        <p:message for="SServicio"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Ubicación:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <h:selectOneMenu class="form-control" required="true" requiredMessage="Seleccione una ubicación" id="SUbicacion" value="#{inventarioCT.ubicacion.idUbicacion}">
                                            <f:selectItem itemLabel="Seleccione Ubicación" noSelectionOption="true"/>
                                            <f:selectItems value="#{inventarioCT.ubicaciones}" var="ubicacion" itemLabel="#{ubicacion.ubicacion}" itemValue="#{ubicacion.idUbicacion}"/>
                                        </h:selectOneMenu>
                                        <p:message for="SUbicacion"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Area:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <h:selectOneMenu class="form-control" required="true" requiredMessage="Seleccione un Area" id="SArea" value="#{inventarioCT.area.idArea}">
                                            <f:selectItem itemLabel="Seleccione Area" noSelectionOption="true"/>
                                            <f:selectItems value="#{inventarioCT.areas}" var="area" itemLabel="#{area.area}" itemValue="#{area.idArea}"/>
                                        </h:selectOneMenu>
                                        <p:message for="SArea"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Estado:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <h:selectOneMenu class="form-control" required="true" requiredMessage="Seleccione un Estado" id="SEstado" value="#{inventarioCT.estadoInventario.idEstado}">
                                            <f:selectItem itemLabel="Seleccione Estado" noSelectionOption="true"/>
                                            <f:selectItems value="#{inventarioCT.estados}" var="estado" itemLabel="#{estado.estadoInventario}" itemValue="#{estado.idEstado}"/>
                                        </h:selectOneMenu>
                                        <p:message for="SEstado"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputObservacion" class="control-label col-md-3 col-sm-3 col-xs-12">Observación:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <p:inputText required="true" requiredMessage="Escriba la observación" class="form-control" id="inputObservacion" placeholder="Escriba la observación" value="#{inventarioCT.inventario.observaciones}"/>
                                        <p:message for="inputObservacion"/>  
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>

                    <div class="col-md-6 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h2>Imagen del Equipo</h2>

                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">


                                <img src="../../resources/images/5570.jpg" alt="..." width="400px;" height="400px;"></img>
                                <br />
                                <p:growl id="messages" showDetail="true" />
                                <p:fileUpload fileUploadListener="#{fileUploadBean.handleFileUpload}"  
                                              mode="advanced"  
                                              update="messages"   
                                              multiple="true"  
                                              sizeLimit="5000000"   
                                              allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />


                            </div>
                        </div>

                    </div>

                    <div class="col-md-12 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h2>Finalizar</h2>

                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <br />
                                <center>   
                                    <p:commandButton                         value="Aceptar" 
                                                                             action="#{inventarioCT.registrarInventario()}" 
                                                                             update=":formularioRegistro"
                                                                             class="btn btn-primary"/>  
                                    <p:button                         value="Cancelar"                                                                           
                                                                      class="btn btn-primary"/> 
                                </center>
                            </div>
                        </div>

                    </div>
                </h:form>
            </div>

            <!-- /page content -->



        </ui:define>

    </ui:composition>


</html>



